<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Retratos de Bonito</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&family=Playfair+Display:wght@600;700&display=swap" rel="stylesheet">
  <script>
    tailwind = {
      config: {
        theme: {
          extend: {
            colors: {
              verde: '#1F3D2B',
              areia: '#F5F3EE',
              grafite: '#1C1C1C',
              cinza: '#6B6B6B'
            }
          }
        }
      }
    }
  </script>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    :root {
      --verde: #1F3D2B;
      --areia: #F5F3EE;
      --grafite: #1C1C1C;
      --cinza: #6B6B6B;
    }

    body {
      font-family: 'Inter', system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
      background: var(--areia);
      color: var(--grafite);
    }

    .font-display { font-family: 'Playfair Display', Georgia, serif; letter-spacing: -0.01em; }
    .fade-in { animation: fadeInUp 0.45s ease-out; }
    @keyframes fadeInUp { from { opacity: 0; transform: translateY(12px); } to { opacity: 1; transform: translateY(0); } }

    a:focus-visible, button:focus-visible { outline: 2px solid var(--verde); outline-offset: 3px; }
  </style>
</head>
<body class="min-h-screen bg-[var(--areia)] text-[var(--grafite)] antialiased">
  <header class="border-b border-[#d8d3c7] bg-[var(--areia)]/95">
    <div class="mx-auto flex max-w-6xl items-center justify-between px-6 py-5">
      <div class="flex items-center gap-3">
        <div class="flex h-10 w-10 items-center justify-center rounded-full bg-[var(--verde)] text-[var(--areia)] text-lg font-semibold">RB</div>
        <div class="leading-tight">
          <p class="font-display text-xl text-[var(--grafite)]">Retratos de Bonito</p>
          <p class="text-sm text-[var(--cinza)]">Museu Digital Comunitário</p>
        </div>
      </div>
      <nav class="flex items-center gap-6 text-sm font-medium">
        <a href="/" class="text-[var(--grafite)] transition hover:text-[var(--verde)]">Início</a>
        <a href="/search.html" class="text-[var(--grafite)] transition hover:text-[var(--verde)]">Buscar</a>
        <a href="/about.html" class="text-[var(--grafite)] transition hover:text-[var(--verde)]">Sobre</a>
      </nav>
    </div>
  </header>

  <main class="mx-auto max-w-6xl px-6 py-16 space-y-12">
    <section class="space-y-4 fade-in">
      <p class="text-sm uppercase tracking-[0.18em] text-[var(--cinza)]">Memória em capítulos</p>
      <h1 class="font-display text-4xl md:text-5xl text-[var(--grafite)]">Timeline de Bonito</h1>
      <p class="max-w-3xl text-base text-[var(--cinza)]">Acompanhe a cidade pelas décadas. Cada capítulo revela pessoas, lugares e histórias que mantêm Bonito vivo na memória coletiva.</p>
    </section>

    <div id="content" class="space-y-12 fade-in">Carregando timeline...</div>
  </main>

  <footer class="mt-20 bg-[var(--verde)] text-[var(--areia)]">
    <div class="mx-auto max-w-6xl px-6 py-10 text-sm leading-relaxed">
      <p class="font-display text-xl">Retratos de Bonito</p>
      <p class="text-[var(--areia)]/90">Bonito, MS · 2025</p>
      <p class="mt-3 max-w-3xl text-[var(--areia)]/80">Arquivo comunitário que preserva e compartilha a memória visual de Bonito. Construído de forma colaborativa para que famílias, escolas e pesquisadores encontrem e contem suas histórias.</p>
    </div>
  </footer>

  <script src="/api.js"></script>
  <script>
    async function load() {
      try {
        const data = await getTimeline()
        render(data)
      } catch (e) {
        document.getElementById('content').innerHTML = '<div class="text-red-700">Erro ao carregar: ' + e.message + '</div>'
      }
    }

    function render(data) {
      if (!data || data.length === 0) {
        document.getElementById('content').innerHTML = '<p class="text-[var(--cinza)]">Nenhuma foto pública encontrada.</p>'
        return
      }

      const sections = data.map(decade => `
        <section class="space-y-6">
          <div class="space-y-2">
            <p class="text-xs uppercase tracking-[0.2em] text-[var(--cinza)]">Capítulo</p>
            <h2 class="font-display text-3xl md:text-4xl text-[var(--grafite)]">Década de ${decade.decade}</h2>
            <p class="text-[var(--cinza)] text-base">Memórias visuais de Bonito nesta década.</p>
          </div>

          <div class="grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4">
            ${decade.photos.map(p => `
              <a href="/photo.html?id=${p.photo_id}" class="group relative block overflow-hidden rounded-xl border border-[#e7e3d7] bg-white shadow-sm transition-all duration-300 hover:-translate-y-1 hover:shadow-md">
                <div class="relative aspect-[3/4] overflow-hidden bg-[#dcd6c9]">
                  <img src="${API}/${encodeURIComponent(p.file_name)}" alt="${p.description || 'Foto da década de ' + decade.decade}" class="h-full w-full object-cover transition duration-300 ease-out group-hover:scale-[1.03]" />
                  <div class="absolute inset-0 bg-gradient-to-b from-transparent via-transparent to-black/30 opacity-0 transition duration-300 ease-out group-hover:opacity-100"></div>
                  <div class="absolute inset-x-0 bottom-0 px-4 pb-4 pt-10 opacity-0 transition duration-300 ease-out group-hover:opacity-100">
                    <p class="text-sm font-medium text-white line-clamp-2">${p.description || 'Sem descrição'}</p>
                    ${p.original_date ? `<p class="text-xs text-white/80 mt-1">${p.original_date}</p>` : ''}
                  </div>
                </div>
                <div class="p-4 space-y-1">
                  <p class="text-sm text-[var(--grafite)] line-clamp-2">${p.description || 'Sem descrição'}</p>
                  ${p.original_date ? `<p class="text-xs text-[var(--cinza)]">${p.original_date}</p>` : ''}
                </div>
              </a>
            `).join('')}
          </div>
        </section>
      `).join('')

      document.getElementById('content').innerHTML = sections
    }

    load()
  </script>
</body>
</html>